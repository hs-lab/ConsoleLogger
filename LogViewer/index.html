<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Master Logger</title>

    <style type="text/css">
        td {
            font-size:smaller;
        }
        th {
            text-align:left;
        }
        .error {
            background-color:lightcoral;
        }
    </style>

    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.min.js"></script>
    <script>
        var uri = 'api/logs';

        $(document).ready(function () {
            $.ajax(
            {
                type: "Get",
                url: uri,
                dataType: "json",
                data: "",
                contentType: "application/json; charset=utf-8",
                success: function (msg) {

                    //parse the object into something useable.
                    var parsed = JSON.parse(msg);
                    for (i in parsed) {
                        item = parsed[i];
                        var date = new Date(parseInt(item.Time.substr(6)));
                        var location = item.Location;
                        var level = item.Level;
                        var addclass = "";
                        var output = item.Output;
                        if (level == "ERROR") {
                            addclass = " class='error'";
                        }
                        $("#logs").append("<tr" + addclass + "><td>" + date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate() +
                            "&nbsp;" + date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds() +"</td><td>" + location +
                            "</td><td>" + level + "</td><td>" + output + "</td></tr>");
                    }
                }
            });
          // Send an AJAX request
          /*$.getJSON(uri)
              .done(function (data, status) {
                // On success, 'data' contains a list of products.
                  $(document.body).append("<p>done</p>");
                  $(document.body).append("<p>" + status + data.length + "</p>");
                  data = '[{"ID":1,"Text":"something with an escaped \\\"double quote\\\" and a single quote does the unicode version\u0027s end of string"}]';
                  $.each(data, function (key, item) {
                      $(document.body).append("<p>hi2</p>");
                    // Add a list item for the product.
                    //  $('<p>', {text: 'g'}).appendTo($(body))
                    //$('<li>', { text: formatItem(item) }).appendTo($('#logs'));
                  });
              });*/
        });

        function formatItem(item) {
            return "hi";
        }
    </script>

</head>
<body>
    <table id="logs">
        <thead>
            <tr>
                <th>Time</th>
                <th>Location</th>
                <th>Level</th>
                <th>Output</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</body>
</html>
